This movie seems to suffer from an identity crisis.  Is it a comedy?  The spoof of the James Bond genre is a genre in and of itself.  The Austin Powers movies set the bar pretty high for a spy comedy and this movie doesn't seem to even make an effort to compete in that league.  The laughs are few and far between and never rise above the level of a grin or chuckle.  Both these stars have proven they can be much funnier in recent movies.
So maybe it's just a spy movie. If that's what this movie is trying to be,  XXX and James Bond blow it  out of the water. The opening scene in a snow covered forest is so obviously  inside a studio that it is laughable. It's not much  better than the winter wonderlands of RUDOLPH THE REDNOSED REINDEER and SANTA CLAUS IS COMING TO TOWN.  The super secret spy thing they have to fight to stop the enemy from getting its hands on is an invisible airplane.  Straight out of Wonder Woman.  
This movie ends with a confusing who is the double agent scene that seems to confuse not just the viewer, but also the actors and probably the writer as well.  Whether this was a comedy or a spy flick, by the time it ends, it is hard to care.