I took my daughter to see this in the theater, as we were fans of the first 2 Madagascar movies.  The story line was really, really rough.  It jumped all over the place, and didn't seem to have much thought or editing done within the story line.
*SPOILER ALERT* The story jumped from: They're stuck in Africa because the penguins never returned, then they go off to find them, break into a casino to get them so they can fly back to NY, then get chased by some crazy animal control lady (her character was RIDICULOUS, by the way) and the plane crashes, then they hop on a train full of circus animals, then they buy the circus with the casino money, then they realize the circus hasn't performed well in years because of an issue with their tiger, then they want to re-invent the circus show to possibly get back to NY assuming some reviewer guy likes their show).  Wow...seriously?!*END OF SPOILER*

  I don't think the overall idea was bad, but it was obviously rushed (or they just didn't care enough to refine the idea and make it more of a smooth story line).  My daughter is such a huge fan of the first 2, and she didn't want to stay for the whole movie...even I was like "seriously?! This thing is still going?".  We actually had to leave about 20 minutes before it was over because she was done.

On the positive side, King Julien is hilarious!  The sad part about that is...he's about the only thing that made my time watching the movie not feel like a complete waste.  I don't like being this critical, but this was a really, really poor follow-up to an otherwise really good series of movies.  Unfortunate.