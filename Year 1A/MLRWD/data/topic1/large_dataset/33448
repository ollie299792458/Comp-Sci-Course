It is difficult to explain  how extremely nonsensical the plot of this movie is, without spoiling it. So let me simply point out some side oddities.

- A speech by the president of the USA, the mayor of Madrid, and several international dignataries is set in the boxed, sniper-friendly environment of Plaza Mayor, with hundreds of private balconies looking directly at close range into the  main stage, a logistical and security nightmare.

- American secret service personnel can boss around Spanish civilians and law enforcement alike, just by shouting "policia" (with the stress in the wrong syllable) and waving a gun. They can adventure way outside they retinue and chase civilians who are clearly Spanish, even engage in a high-speed chase of a Spanish police car, but no one of the abundant local police or snipers hinders them in any way.
By the way, it is possible to sustain a 10-minute car chase in the streets (and walkays) of Madrid without braking one single time, and without running over a single pedestrian.

- Spain has only one street, that ends in the country's only one highway. And all walking paths of every important character end, also, in one precise point of that highway.

- Terrorists able to devise very sophisticated plans, prove to be incredibly stupid in key, very simple parts of their execution.
Also, they can act ruthlessly and fanatically all the time, but have isolated pangs of conscience for no other reason than to suit the plot.
Finally, being almost all of them Spaniards, they will speak some Spanish among themselves to add local color, but then suddenly switch to English for no apparent reason.
Trained and motivated terrorists are so scarce, that the only guy available for the heavy duty work has to be coerced into it by unverisimilar means. And, aside from his incredible killing efficiency, he's pretty stupid otherwise.

- American secret servicemen in the middle of a national security crisis of epic proportions have time to peek around the inside of vehicles on a car crash, for no apparent reason.

The premise of the movie is repeating the same series of events from the point of view of several protagonists.
As the perspectives add up, the plot is supposed to start "making sense".
But these and many other inconsistencies seriously attempt against any credibility of the plot.