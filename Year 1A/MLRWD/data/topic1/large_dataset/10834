This is a spoiler, so don't read this if you haven't seen the movie yet.
This is it in a nut shell:
Here is what happens...
Guy treats girl badly... meets another girl he likes better...  girl gets upset and kills herself with him in the car.
He gets out of the hospital with his face all messed up....tries to get back with girl he really likes... she ignores him at the bar.
He wakes up in the street, and goes on about his life...
He keeps seeing the ad for LE (they kept asking him who ELLIE was). LE was the company that froze the dog and brought it back to life.
He signs a contract with LE that when he dies, he wants to be frozen, but he gets the `dreams' package, where you continue to dream while you are frozen. (Why a guy who has nightmares would do this, I have no idea).
A few months go by and he still wants the girl, and feeling sorry for himself, OD's on pills and alcohol and dies.
In his contract with LE, he had the option of starting his dream any where in his life. If, for example, he was 100 years old when he died, he could be 20 in his dream state.
He chose to go back to the moment he passed out on the street that night. For his dream to begin there... (his face was never fixed...that was his dream)
His conscious messed with him... even though he wanted to live his dream state with his face fixed and with the girl he loved, the other girl he used still was in his conscious and it was interfering with his dream.
So, he is figuring this out on his own as he is being `questioned' by `someone else', who is really his ideal father figure.
So, they explain to him all this stuff, he remembers it, and then they say 150 years has gone by. They fixed the bug in the software that allowed this nightmare to continue as long as it did and they could continue his dream-state, or, if he would rather, they could wake him up. The technology of the future 150 years from now can fix his face and bring him back to life. 
For him to choose to come back to life, he must conquer his fear of heights by jumping off the roof (once again, these were all requirements he originally ordered on his contract before he died). But dreams are so real... He really feels as though he is really jumping off the top of a building. Or, he can not jump, stay frozen, and continue in dream-land without the nightmares.
So before he jumps, he conjures up his love again, and remembers what she said at the bar about talking to him in their next life when they are `both cats'.
He thinks that is ironic since she is long dead and he is continuing his life 150 years later. So he is going to look for her in his new life. To find her re-incarnated in someone alive 150 years later. He prefers that over dreaming.
Then he jumps off the building, and his whole life flashes before his eyes....and then he wakes up...(yes, 150 years later) and then the credits roll.